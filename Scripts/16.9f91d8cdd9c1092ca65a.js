(function(){var R=document&&document.currentScript&&document.currentScript.src;(window.webpackJsonpruntime=window.webpackJsonpruntime||[]).push([[16],{"09uc":function(M,m,l){"use strict";l.r(m),l.d(m,"init",function(){return H}),l.d(m,"openPopupWithEvent",function(){return B}),l.d(m,"closePopup",function(){return F});var N=l("yXPU"),S=l.n(N);function D(o,n,r,c,g){window.dmShowPopupPage(o,n,r,c,g)}function a(o,n){window.dmHidePopup(o,n)}var v=l("C+iK"),b=l("NO3N"),u=l("J66h");const x=230,s=270,L=300,O=390;class P{constructor({container:n}){this.container=n,this.navigationMonths=0,this._bindMethods(),n.addEventListener("click",this._navigationDispatch),this._loadCurrentMonth()}_bindMethods(){this._loadNewMonth=this._loadNewMonth.bind(this),this._loadCurrentMonth=this._loadCurrentMonth.bind(this),this._buildDataString=this._buildDataString.bind(this),this._fetchAndLoadNewMonth=this._fetchAndLoadNewMonth.bind(this),this._navigationDispatch=this._navigationDispatch.bind(this)}_navigationDispatch(n){const r=n.target.closest("[class*=arrow-container]"),c=n.target.closest(".today-btn-container");r?this._loadNewMonth(r):c&&this._loadCurrentMonth()}_buildDataString(){const n={};return n.commandID="d1_loadNewGoogleCalendar",n["data-public-calendar-id"]=this.container.getAttribute("data-public-calendar-id"),n["data-navigation-months"]="0",n.device=v.getCurrentLayoutDevice(),n["data-week-start-on"]=this.container.getAttribute("data-week-start-on"),n}_loadCurrentMonth(){var n=this;return S()(function*(){const r=n._buildDataString();yield n._fetchAndLoadNewMonth(r,0)})()}_loadNewMonth(n){var r=this;return S()(function*(){const c=r._buildDataString(),f=getComputedStyle(r.container.querySelector(".calendar-container")).getPropertyValue("direction")==="rtl"?-1:1,p=n.classList.contains("left-arrow-container")?-1:1,h=r.navigationMonths+f*p,A=h.toString(10);c["data-navigation-months"]=A,yield r._fetchAndLoadNewMonth(c,h)})()}_fetchAndLoadNewMonth(n,r){var c=this;return S()(function*(){const g=`/_dm/s/rt/api/public/wpl/site/${v.getSiteAlias()}`,f=yield fetch(g,{method:"POST",credentials:"include",body:JSON.stringify(n),headers:{"Content-Type":"application/json"}});if(f.ok){const p=yield f.json();if(p.googleCalendarMarkup){const h=document.createElement("div");h.innerHTML=p.googleCalendarMarkup.toString(),c.container.innerHTML=h.querySelector(".dm-google-calendar").innerHTML,c.container.setAttribute("data-navigation-months",n["data-navigation-months"])}c.navigationMonths=r}})()}}P.displayName="GoogleCalendar";function H(){const o=[];Array.from(document.querySelectorAll(".dm-google-calendar")).forEach(r=>{o[r.id]=new P({container:r})}),I(o)}function B(o){const n=document.createElement("div"),r=o.description?`<div class='event-description dmNewParagraph'>${o.description.replace(/\n/g,"<br>")}</div>`:"",c=`<span>
                        ${o.isAllDayEvent==="true"?o.date:`${o.start} - ${o.end}`}
                        </span>`;n.innerHTML=`
        <div class='event-full-container'>
          <p>
              <span class="event-full-container-title">${o.summary}</span>
              <br/>
              ${c}
              <br/>
          </p> 
          ${r}     
        </div>    
`,n.querySelectorAll(".event-description a").forEach(function(h){h.setAttribute("target","_blank")});const g={dontOverlay:!0,animation:"opened-calendar-popup"},f=v.getCurrentLayoutDevice()===b.b.MOBILE?x:s,p=v.getCurrentLayoutDevice()===b.b.MOBILE?L:O;D(n,"google-calendar-popup-content-container",p,f,g)}function F(){a()}function I(o){o.length?document.addEventListener("click",y):document.removeEventListener("click",y)}function y(o){const n=o.target.closest(".event-container"),r=o.target.closest(".x-more-container"),c=o.target.closest(".monthly-day-card.mobile");n?_(n):r?w(r):c&&w(c,!0)}function _(o){const n=JSON.parse(u.Base64.decode(o.dataset.calendarEvent));!n||B(n)}function w(o,n=!1){const r=o.closest(".monthly-day-card");if(!r.querySelector(".events-container").querySelectorAll(".event-container").length)return;const f=r.cloneNode(!0),p=f.querySelector(".x-more-container");p&&p.remove(),n&&(f.querySelector(".events-container").style.display="block");const h=JSON.parse(u.Base64.decode(r.dataset.dayEvents));let A="";for(const i of h){const d=JSON.parse(u.Base64.decode(i.eventB64));let C="";d.isAllDayEvent==="false"&&(C=`<span class="start"> ${i.start}</span>`),A+=`
            <p class="event-container clickable" data-calendar-event=${u.Base64.encode(JSON.stringify(d))}>
              ${C}
              <span>${d.summary}</span>
              <br/>
            </p>
`}const U=f.querySelector(".events-container");U.innerHTML=A;const $=f,E={dontOverlay:!0,animation:"opened-calendar-popup"},t=v.getCurrentLayoutDevice()===b.b.MOBILE?x:s,e=v.getCurrentLayoutDevice()===b.b.MOBILE?L:O;D($,"google-calendar-popup-content-container",e,t,E)}},J66h:function(M,m,l){(function(N){var S,D;(function(a,v){M.exports=v(a)})(typeof self!="undefined"?self:typeof window!="undefined"?window:typeof N!="undefined"?N:this,function(a){"use strict";a=a||{};var v=a.Base64,b="2.6.4",u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",x=function(t){for(var e={},i=0,d=t.length;i<d;i++)e[t.charAt(i)]=i;return e}(u),s=String.fromCharCode,L=function(t){if(t.length<2){var e=t.charCodeAt(0);return e<128?t:e<2048?s(192|e>>>6)+s(128|e&63):s(224|e>>>12&15)+s(128|e>>>6&63)+s(128|e&63)}else{var e=65536+(t.charCodeAt(0)-55296)*1024+(t.charCodeAt(1)-56320);return s(240|e>>>18&7)+s(128|e>>>12&63)+s(128|e>>>6&63)+s(128|e&63)}},O=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,P=function(t){return t.replace(O,L)},H=function(t){var e=[0,2,1][t.length%3],i=t.charCodeAt(0)<<16|(t.length>1?t.charCodeAt(1):0)<<8|(t.length>2?t.charCodeAt(2):0),d=[u.charAt(i>>>18),u.charAt(i>>>12&63),e>=2?"=":u.charAt(i>>>6&63),e>=1?"=":u.charAt(i&63)];return d.join("")},B=a.btoa&&typeof a.btoa=="function"?function(t){return a.btoa(t)}:function(t){if(t.match(/[^\x00-\xFF]/))throw new RangeError("The string contains invalid characters.");return t.replace(/[\s\S]{1,3}/g,H)},F=function(t){return B(P(String(t)))},I=function(t){return t.replace(/[+\/]/g,function(e){return e=="+"?"-":"_"}).replace(/=/g,"")},y=function(t,e){return e?I(F(t)):F(t)},_=function(t){return y(t,!0)},w;a.Uint8Array&&(w=function(t,e){for(var i="",d=0,C=t.length;d<C;d+=3){var J=t[d],j=t[d+1],W=t[d+2],T=J<<16|j<<8|W;i+=u.charAt(T>>>18)+u.charAt(T>>>12&63)+(typeof j!="undefined"?u.charAt(T>>>6&63):"=")+(typeof W!="undefined"?u.charAt(T&63):"=")}return e?I(i):i});var o=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,n=function(t){switch(t.length){case 4:var e=(7&t.charCodeAt(0))<<18|(63&t.charCodeAt(1))<<12|(63&t.charCodeAt(2))<<6|63&t.charCodeAt(3),i=e-65536;return s((i>>>10)+55296)+s((i&1023)+56320);case 3:return s((15&t.charCodeAt(0))<<12|(63&t.charCodeAt(1))<<6|63&t.charCodeAt(2));default:return s((31&t.charCodeAt(0))<<6|63&t.charCodeAt(1))}},r=function(t){return t.replace(o,n)},c=function(t){var e=t.length,i=e%4,d=(e>0?x[t.charAt(0)]<<18:0)|(e>1?x[t.charAt(1)]<<12:0)|(e>2?x[t.charAt(2)]<<6:0)|(e>3?x[t.charAt(3)]:0),C=[s(d>>>16),s(d>>>8&255),s(d&255)];return C.length-=[0,0,2,1][i],C.join("")},g=a.atob&&typeof a.atob=="function"?function(t){return a.atob(t)}:function(t){return t.replace(/\S{1,4}/g,c)},f=function(t){return g(String(t).replace(/[^A-Za-z0-9\+\/]/g,""))},p=function(t){return r(g(t))},h=function(t){return String(t).replace(/[-_]/g,function(e){return e=="-"?"+":"/"}).replace(/[^A-Za-z0-9\+\/]/g,"")},A=function(t){return p(h(t))},U;a.Uint8Array&&(U=function(t){return Uint8Array.from(f(h(t)),function(e){return e.charCodeAt(0)})});var $=function(){var t=a.Base64;return a.Base64=v,t};if(a.Base64={VERSION:b,atob:f,btoa:B,fromBase64:A,toBase64:y,utob:P,encode:y,encodeURI:_,btou:r,decode:A,noConflict:$,fromUint8Array:w,toUint8Array:U},typeof Object.defineProperty=="function"){var E=function(t){return{value:t,enumerable:!1,writable:!0,configurable:!0}};a.Base64.extendString=function(){Object.defineProperty(String.prototype,"fromBase64",E(function(){return A(this)})),Object.defineProperty(String.prototype,"toBase64",E(function(t){return y(this,t)})),Object.defineProperty(String.prototype,"toBase64URI",E(function(){return y(this,!0)}))}}return a.Meteor&&(Base64=a.Base64),M.exports?M.exports.Base64=a.Base64:(S=[],D=function(){return a.Base64}.apply(m,S),D!==void 0&&(M.exports=D)),{Base64:a.Base64}})}).call(this,l("yLpj"))}}])})();
